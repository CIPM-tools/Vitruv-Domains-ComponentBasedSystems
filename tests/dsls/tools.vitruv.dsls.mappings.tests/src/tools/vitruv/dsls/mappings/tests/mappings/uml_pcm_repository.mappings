import "http://www.eclipse.org/uml2/5.0.0/UML" as uml 
import "http://palladiosimulator.org/PalladioComponentModel/5.2" as pcm
    	
mappings: umlXpcmRepository for UML and PCM
 
mapping Repository {

   map (pcm::Repository repository)
   and (uml::Package repositoryPkg 
   	uml::Package contractsPkg 
   	uml::Package datatypesPkg
   )
   with {
  	//null  equals repositoryPkg[nestedPackage]
   	contractsPkg in repositoryPkg[packagedElement]
   	datatypesPkg in repositoryPkg[packagedElement]
   	"contracts" equals contractsPkg[name]
   	"datatypes" equals datatypesPkg[name]
   }
   
    such that {
		observe attributes {
			pcm::Repository[entityName] 
			uml::Package[name]
		}
		
	  	routine updateRepoPackageName(pcm::Repository repository) { 
//			match{
//				val repositoryPkg = retrieve asserted uml::Package corresponding to repositoryPkg tagged with "umlXpcm_map_UML_and_PCM_correspondence_Repository:repository_with_Package:repositoryPkg"		
//			}	
			action {
				execute {
					
				}
			//	call {}
				//update repositoryPkg {
				//if (repositoryPkg.name != affectedEObject.entityName.toFirstLower)
				//repositoryPkg.name = affectedEObject.entityName.toFirstLower					
				//}
			}
		}
		routine updateRepoName(uml::Package repositoryPkg, uml::Package contractsPkg, uml::Package datatypesPkg) {
			//match{
			//	val repository = retrieve optional pcm::Repository corresponding to affectedEObject tagged with "umlXpcm_map_UML_and_PCM_correspondence_Repository:repository_with_Package:repositoryPkg"
			//} 	
			action {
				execute {
					//if(repository.isPresent){
					//	repository.get.entityName = affectedEObject.name.toFirstUpper					
					//}
				}
			}
		}
  	 }
}
