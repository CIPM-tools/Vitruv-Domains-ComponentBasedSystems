import "http://www.eclipse.org/uml2/5.0.0/UML" as uml 
import "http://palladiosimulator.org/PalladioComponentModel/5.2" as pcm
    	
mappings: umlXpcmSimple for UML and PCM
 
 mapping SystemXPackage {
	map(pcm::System system)
	and(uml::Package pkg)
	with{
		pkg in pkg[packagedElement]
	}
	such that {
		//observe attributes {
		//	pcm::System[entityName]
		//	uml::Package[name]
		//}
	}
	//todo: add reaction for IPREClassRemoved, IPREClassNameChanged, IPREConstructorOperationNameChanged
}
 			 			
 			 		
 			 
mapping RepositoryXPackage {

   map (pcm::Repository repository)
   
   and (uml::Package rootPkg 
   	uml::Package repositoryPkg 
   	uml::Package contractsPkg 
   	uml::Package datatypesPkg
   )
   with {
  	null  equals rootPkg[nestedPackage]
  repositoryPkg in rootPkg[packagedElement]
   	contractsPkg in rootPkg[packagedElement]
   	datatypesPkg in rootPkg[packagedElement]
   	"repositories" equals repositoryPkg[name]
   	"contracts" equals contractsPkg[name]
   	"datatypes" equals datatypesPkg[name]
   }
    such that {
    // repository[entityName] =    rootPkg[name]   	
		observe attributes {
		pcm::Repository[entityName] 
			uml::Package[name]
		}
	
	  	routine updateRepoPackageName(pcm::Repository affectedEObject , plain String as mappingObject) { 
		//	match{
//				val repositoryPkg = retrieve asserted uml::Package corresponding to affectedEObject tagged with "umlXpcm_map_UML_and_PCM_correspondence_Repository:repository_with_Package:repositoryPkg"
	//		}	
			action {
				execute {
					
				}
			//	call {}
				//update repositoryPkg {
				//if (repositoryPkg.name != affectedEObject.entityName.toFirstLower)
				//repositoryPkg.name = affectedEObject.entityName.toFirstLower					
				//}
			}
		}
		routine updateRepoName(uml::Package affectedEObject, plain String as mappingObject) {
			//match{
			//	val repository = retrieve optional pcm::Repository corresponding to affectedEObject tagged with "umlXpcm_map_UML_and_PCM_correspondence_Repository:repository_with_Package:repositoryPkg"
			//} 	
			action {
				execute {
					//if(repository.isPresent){
					//	repository.get.entityName = affectedEObject.name.toFirstUpper					
					//}
				}
			}
		}
  	 }
}
