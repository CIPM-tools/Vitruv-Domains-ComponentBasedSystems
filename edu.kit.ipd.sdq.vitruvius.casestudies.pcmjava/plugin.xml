<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
	<!--Case study pcmjava is a extension of a VITRUVIUS project-->
   <extension
         point="edu.kit.ipd.sdq.vitruvius.framework.projects.vitruviusproject">
   </extension>
   
   <!--Extension point for new project wizard-->
   <extension
         point="org.eclipse.ui.newWizards">
      <wizard
            category="edu.kit.ipd.sdq.vitruvius.casestudies.vitruvius_projects"
            class="edu.kit.ipd.sdq.vitruvius.casestudies.pcmjava.ui.projectwizard.NewPCMJavaProjectWizard"
            finalPerspective="de.uka.ipd.sdq.pcmbench.perspectives.palladio"
            hasPages="true"
            id="edu.kit.ipd.sdq.vitruvius.casestudies.pcmjava.PCMJavaWizard"
            name="PCM Java Project"
            project="true">
      </wizard>
      <category
            id="edu.kit.ipd.sdq.vitruvius.casestudies.pcmjava."
            name="New PCM Java Project">
      </category>
   </extension>
   
   
   <extension
         id="edu.kit.ipd.sdq.vitruvius.casestudies.pcmjava.builder.PCMJavaBuilder.id"
         point="org.eclipse.core.resources.builders">
      <builder>
         <run
               class="edu.kit.ipd.sdq.vitruvius.casestudies.pcmjava.builder.PCMJavaBuilder">
         </run>
       </builder>
   </extension>

   <extension 
   	        point="org.eclipse.ui.menus">
	    <menuContribution
	    	   allPopups="false"
	    	   locationURI="popup:org.eclipse.ui.projectConfigure?after=additions">
	        <command
	        	commandId="edu.kit.ipd.sdq.vitruvius.casestudies.pcmjava.builder.addbuilder.commandId"
	        	style="push">
	        	<visibleWhen
                  checkEnabled="false">
               <and>
                  <count
                        value="1">
                  </count>
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <adapt
                           type="org.eclipse.core.resources.IProject">
                     </adapt>
                  </iterate>
                  <iterate>
                     <not>
                        <test
                              forcePluginActivation="true"
                              property="edu.kit.ipd.sdq.vitruvius.casestudies.pcmjava.builder.isEnabled">
                        </test>
                     </not>
                  </iterate>
               </and>
            </visibleWhen>
	        </command>
	        <command 
	        	commandId="edu.kit.ipd.sdq.vitruvius.casestudies.pcmjava.builder.removebuilder.commandId"
	         	style="push">
	         	<visibleWhen
                  checkEnabled="false">
               <and>
                  <count
                        value="1">
                  </count>
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <adapt
                           type="org.eclipse.core.resources.IProject">
                     </adapt>
                  </iterate>
                  <iterate>
                     <test
                           forcePluginActivation="true"
                           property="edu.kit.ipd.sdq.vitruvius.casestudies.pcmjava.builder.isEnabled">
                     </test>
                  </iterate>
               </and>
            </visibleWhen>
	        </command>
	    </menuContribution>
	</extension>
	
	<extension point="org.eclipse.ui.commands">
    	<command
    		 defaultHandler="edu.kit.ipd.sdq.vitruvius.casestudies.pcmjava.builder.PCMJavaAddBuilder" 
    		 id="edu.kit.ipd.sdq.vitruvius.casestudies.pcmjava.builder.addbuilder.commandId" 
    		 name="Add PCM Java Builder">
    	</command>
	    <command
	    	 defaultHandler="edu.kit.ipd.sdq.vitruvius.casestudies.pcmjava.builder.PCMJavaRemoveBuilder"
	    	  id="edu.kit.ipd.sdq.vitruvius.casestudies.pcmjava.builder.removebuilder.commandId" 
	    	  name="Remove PCM Java Builder">
	    </command>
	</extension>
	
	<extension
         point="org.eclipse.core.expressions.propertyTesters">
      <propertyTester
            class="edu.kit.ipd.sdq.vitruvius.casestudies.pcmjava.builder.PCMJavaTestBuilderEnabled"
            id="edu.kit.ipd.sdq.vitruvius.casestudies.pcmjava.builder.PCMJavaBuilder.id"
            namespace="edu.kit.ipd.sdq.vitruvius.casestudies.pcmjava.builder"
            properties="isEnabled"
            type="java.lang.Object">
      </propertyTester>
   </extension>
 <extension
       point="org.eclipse.ui.startup">
    <startup
          class="edu.kit.ipd.sdq.vitruvius.casestudies.pcmjava.builder.BuildOnEclipseStartup">
    </startup>
 </extension>
   
  
</plugin>
